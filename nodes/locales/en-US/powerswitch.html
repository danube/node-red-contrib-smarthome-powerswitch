<script type="text/html" data-help-name="powerswitch">
    <p>Power switch for lights, smart plugs or anything else handling on/off commands.</p>
    <p>Control the output with pushbuttons, motion detectors, over the web or anything else.</p>

    <h3>Input</h3>
    <dl class="message-properties">
        <dt>topic<span class="property-type">as configured</span></dt>
        <dd>Can be a toggle (like a wall button), motion detector, actuator feedback or force command. It must meet either the defaults or the configured string. Defaults are described in the input fields when left blank.</dd>
        <dt>payload<span class="property-type">as configured</span></dt>
        <dd>Must meet the setting in the configuration editor. Defaults are <code>true</code> and <code>false</code>.</dd>
    </dl>

    <h3>Output</h3>
    <dl class="message-properties">
        <dt>topic<span class="property-type">string</span></dt>
        <dd>Hardcoded <code>command</code>, will be configurable in the near future.</dd>
        <dt>payload<span class="property-type">string</span></dt>
        <dd><code>true</code> or <code>false</code>.</dd>
    </dl>
    
    <h3>Configuration</h3>
        <h4 style="font-weight: bolder;">Name</h4>
        <p>Defines the node name, which will also be shown on the drawpad.</p>

        <h4 style="font-weight: bolder;">Toggle message</h4>
        <p>The values 'Topic' and 'Payload' define the expected content of the incoming message for a toggling event. The Control output then will be inverted. Incoming <code>msg.topic</code> must match the value configured in the field 'Topic' and incoming <code>msg.payload</code> must match the value configured in the field 'Payload'. If the configuration field 'Topic' is empty, the value <code>toggle</code> is expected as <code>msg.topic</code>.</p>
        
        <h4 style="font-weight: bolder;">Motion detector</h4>
        <p>The values 'Topic' and 'Payload' define the expected content of the incoming message for an event to trigger on the device. The Control output then will turn on. Use the 'Timeout' configuration to set the delay until the light should be turned off. This time begins to count down as soon as the motion detector sends a message which meets the configured off payload. Incoming <code>msg.topic</code> must match the value configured in the field 'Topic' and incoming <code>msg.payload</code> must match the value configured in the field 'On payload' (coming trigger from the sensor) and 'Off payload' (going trigger from the sensor). If the configuration field 'Topic' is empty, the value <code>motion</code> is expected as <code>msg.topic</code>.</p>
        
        <h4 style="font-weight: bolder;">Force message</h4>
        <p>If you want the device to turn on or off, you either use a button to toggle the device state or force the device to change to that state you want to have it. For example, if you have some house leaving button or so with which you turn off all lights in your environment, let the button send the relevant 'Topic' together with 'On payload' or 'Off payload' as configured.</p>

        <h4 style="font-weight: bolder;">Actuator feedback message</h4>
        <p>If whatever device you control sends a feedback, enable the option and connect the feedback signal to the node. If this option is disabled, the node thinks the device is turned on or off, depending on the outgoing command signal. If this option is turned on, the node waits for the feedback signal. Use the fields to configure, how your feedback signal is constructed.</p>

        <h4 style="font-weight: bolder;">Absolute timeout</h4>
        <p>Enable this option if you want to configure an absolute timeout. This will automatically turn off the actor after the configured time. Use this i.e. to turn off lights you may have forgotten to manually turn off with your wall button.</p>

</script>